<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>AEP / AJO SkillStudio</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <aside id="sidebar">
      <div class="brand">
        <div class="logo">AEP &amp; AJO<br/><span>SkillStudio</span></div>
      </div>

      <nav>
        <button class="nav" data-page="overview">Overview</button>
        <button class="nav active" data-page="schemas">Schemas</button>
        <button class="nav" data-page="ingestion">Ingestion</button>
        <button class="nav" data-page="profiles">Profiles</button>
        <button class="nav" data-page="segments">Segments</button>
        <button class="nav" data-page="journeys">Journeys</button>
        <button class="nav" data-page="export">Export Data</button>
      </nav>

      <div class="sidebar-bottom">
        <div class="theme-controls">
          <button id="toggleDark">Dark</button>
          <button id="toggleAep">AEP</button>
        </div>
        <p class="muted">Free Practice Simulator</p>
      </div>
    </aside>

    <main id="content">
      <header class="topbar">
        <h1 id="appTitle">AEP / AJO SkillStudio</h1>
        <div class="right">
          <input id="searchProfiles" placeholder="Search profiles..." />
          <button id="helpBtn">Help</button>
        </div>
      </header>

      <div id="pages">

        <!-- Overview -->
        <section id="overview" class="page">
          <div class="grid">
            <div class="card">
              <h2>Welcome</h2>
              <p>Use this simulator to practice AEP/AJO flows: <strong>Create Schema → Data ingest → profiles → Segments → Activate Journeys</strong>.</p>
            </div>
            <div class="card">
              <h2>Quick Stats</h2>
              <div id="quickStats">
                Schemas: 0<br/>Profiles: 0<br/>Segments: 0
              </div>
            </div>
            <div class="card">
              <h2>Actions</h2>
              <button id="gotoSchemas">Manage Schemas</button>
              <button id="gotoIngest">Ingest Data</button>
            </div>
          </div>
        </section>

        <!-- Schemas -->
        <section id="schemas" class="page">
          <div class="grid">
            <div class="card" id="schemaEditorCard">
              <h2 id="schemaEditorTitle">Create / Edit Schema</h2>
              <input id="schemaName" placeholder="Schema name" />
              <div id="fieldsContainer"></div>

              <div class="row">
                <button id="addFieldBtn" class="btn green">Add Field</button>
                <button id="saveSchemaBtn" class="btn teal">Save Schema</button>
                <button id="cancelEdit" class="btn ghost">Cancel</button>
              </div>
            </div>

            <div class="card">
              <h2>Existing Schemas</h2>
              <table id="schemasTable" class="listTable">
                <!-- populated by JS -->
              </table>
            </div>
          </div>
        </section>

        <!-- Ingestion -->
        <section id="ingestion" class="page">
          <div class="grid">
            <div class="card">
              <h2>Generate Profiles</h2>
              <select id="ingestSchemaSelect"></select>
              <div class="row compact">
                <label>Count</label>
                <input id="profileCount" type="number" min="1" value="5" />
              </div>
              <div class="row">
                <button id="generateProfiles" class="btn teal">Generate</button>
                <button id="clearProfiles" class="btn red">Clear Profiles</button>
              </div>
            </div>

            <div class="card">
              <h2>Current Profiles</h2>
              <table id="profilesTable" class="listTable"></table>
              <div class="row">
                <button id="viewProfilesJSON" class="btn">View JSON</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Profiles -->
        <section id="profiles" class="page">
          <div class="card">
            <h2>Profiles</h2>
            <table id="profilesTableMain" class="listTable"></table>
          </div>
        </section>

        <!-- Segments -->
        <section id="segments" class="page">
          <div class="grid">
            <div class="card">
              <h2>Create Segment</h2>
              <input id="segmentName" placeholder="Segment name" />
              <select id="segmentField"></select>
              <input id="segmentValue" placeholder="value (e.g. USA)" />
              <div class="row">
                <button id="createSegment" class="btn green">Create</button>
              </div>
            </div>

            <div class="card">
              <h2>Existing Segments</h2>
              <table id="segmentsTable" class="listTable"></table>
            </div>
          </div>
        </section>

        <!-- Journeys -->
        <section id="journeys" class="page">
          <div class="grid">
            <div class="card">
              <h2>Journey Simulator</h2>
              <label>Pick schema-derived profile</label>
              <select id="journeyProfileSelect"></select>

              <label>Pick segment (optional)</label>
              <select id="journeySegmentSelect"><option value="">— none —</option></select>

              <div class="row">
                <button id="startJourney" class="btn teal">Start Journey</button>
                <button id="stopJourney" class="btn red">Stop</button>
              </div>
              <div class="log" id="journeyLog"></div>
            </div>

            <div class="card">
              <h2>Active Journeys</h2>
              <table id="journeysTable" class="listTable"></table>
            </div>
          </div>
        </section>

        <!-- Export -->
        <section id="export" class="page">
          <div class="card">
            <h2>Export Data</h2>
            <button id="exportData" class="btn">Download JSON</button>
          </div>
        </section>

      </div>
    </main>
  </div>

  <!-- JSON viewer modal -->
  <div id="jsonModal" class="modal hidden">
    <div class="modal-content">
      <button id="closeJson" class="close">×</button>
      <pre id="jsonContent"></pre>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
